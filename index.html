<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Opening – CNP‑Catch</title>
<style>
/* ============================
   Web フォント登録
   Verdana Bold.ttf と同じ階層に index.html を置く想定
============================ */
@font-face{
  font-family:'VerdanaBold';
  src:url('Verdana Bold.ttf') format('truetype');
  font-weight:700;font-style:normal;
}

/* ============================
   レイアウト & 背景
============================ */
html,body{margin:0;height:100%;overflow:hidden;background:#000;font-family:"Zen Kaku Gothic New",sans-serif;}

#opening-stage{position:relative;width:100%;height:100%;overflow:hidden;}

/* ============================
   タイトル表示
============================ */
#game-title{
  position:absolute;top:35%;left:50%;transform:translateX(-50%);
  font-size:6vw;letter-spacing:.05em;color:#fff;
  font-family:'VerdanaBold','Zen Kaku Gothic New',sans-serif;
  text-shadow:0 0 12px rgba(255,255,255,.7);
  pointer-events:none;z-index:15;
}

/* ============================
   スタートボタン
============================ */
#start-btn{
  position:absolute;left:50%;top:60%;transform:translate(-50%,-50%);
  padding:16px 48px;font-size:28px;letter-spacing:.08em;color:#fff;
  background:rgba(0,0,0,.55);border:2px solid #fff;border-radius:14px;
  cursor:pointer;z-index:20;transition:background .3s,transform .3s,opacity .6s;
}
#start-btn:hover {background:rgba(255,255,255,.15);transform:translate(-50%,-50%) scale(1.05);} 
#start-btn:active{transform:translate(-50%,-50%) scale(.96);} 

/* ============================
   キャラクター共通スタイル
============================ */
/* ▼ 旧：width:120px; ------------- */
.char{
  position:absolute;
  width:8vw;           /* 画面幅の 8% に可変 */
  min-width:100px;     /* スマホで小さくなりすぎないよう下限 */
  max-width:180px;     /* PC で大きくなりすぎないよう上限 */
  pointer-events:none;
  will-change:transform;
  animation:float linear forwards;
}
   /* ここからスマホ用の上書き */
@media (max-width: 600px){
  .char{
    width:22vw;      /* スマホで少し大きめに表示 */
    min-width:90px;  /* 小さくなりすぎない下限   */
  }
}  /* ← この閉じカッコを忘れない */
@keyframes bob{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-1vw)}}
.char img{width:100%;animation:bob 3s ease-in-out infinite;}
@keyframes float{from{transform:translate(var(--startX),var(--startY));opacity:0}5%{opacity:1}to{transform:translate(var(--endX),var(--endY));opacity:0}}

/* ============================
   ほたる風キラキラ背景
============================ */
@keyframes twinkle{0%,100%{transform:scale(.4);opacity:0;}10%{opacity:.8;}50%{opacity:1;}90%{opacity:.8;transform:scale(.6);}}
.star{position:fixed;width:4px;height:4px;border-radius:50%;background:#fff;pointer-events:none;animation:twinkle 4.5s linear infinite;filter:blur(1px) drop-shadow(0 0 4px currentColor);}
.star.c1{color:#FFD700;}.star.c2{color:#7FFFD4;}.star.c3{color:#FF69B4;}
</style>
</head>
<body>

<!-- ============================
     BGM
============================ -->
<audio id="bgm" src="CNP Catch.mp3" preload="auto" loop playsinline></audio>

<!-- ============================
     Opening ステージ
============================ -->
<div id="opening-stage">
  <h1 id="game-title">CNP Catch</h1>
  <button id="start-btn">START</button>
</div>

<script>
/* ----------------------------------------------------------
 * 画像リスト
 * ---------------------------------------------------------- */
const charImages=[
  "Leeleeg (1).png","leelee (1).png","luna (1).png","makamih (1).png",
  "makamio (1).png","mitaman (1).png","mitamag (1).png","narukami (1).png",
  "narukamik (1).png","orochi (1).png","oroti (1).png","runa (1).png",
  "setuna (1).png","towa (1).png","yamar (1).png","yama (2).png",
];
const CONCURRENT=6;const INTERVAL=900;
const stage=document.getElementById("opening-stage");
const bgm=document.getElementById("bgm");
const startBtn=document.getElementById("start-btn");
const stageW=()=>stage.clientWidth;const stageH=()=>stage.clientHeight;

/* オーディオ */
function fadeInVolume(){let v=0;bgm.volume=0;const id=setInterval(()=>{v+=0.05;bgm.volume=Math.min(v,1);if(v>=1)clearInterval(id);},100);} 
function attemptPlay(){if(!bgm.paused) return;bgm.play().then(fadeInVolume).catch(err=>{console.warn("Audio play blocked",err);});}
window.addEventListener("load",attemptPlay);stage.addEventListener("click",attemptPlay);stage.addEventListener("touchstart",attemptPlay,{passive:true});

/* キャラ生成 */
function randomEdgePos(){const e=Math.floor(Math.random()*4);switch(e){case 0:return{x:Math.random()*stageW(),y:-150};case 1:return{x:stageW()+150,y:Math.random()*stageH()};case 2:return{x:Math.random()*stageW(),y:stageH()+150};default:return{x:-150,y:Math.random()*stageH()};}}
function spawnChar(){const w=document.createElement("div");w.className="char";const i=document.createElement("img");i.src=charImages[Math.floor(Math.random()*charImages.length)];w.appendChild(i);const s=randomEdgePos();let e=randomEdgePos();while(Math.abs(s.x-e.x)<200&&Math.abs(s.y-e.y)<200){e=randomEdgePos();}w.style.setProperty("--startX",s.x+"px");w.style.setProperty("--startY",s.y+"px");w.style.setProperty("--endX",e.x+"px");w.style.setProperty("--endY",e.y+"px");const d=5+Math.random()*4;w.style.animationDuration=d+"s";stage.appendChild(w);setTimeout(()=>w.remove(),d*1000);}let running=0;setInterval(()=>{if(running<CONCURRENT){spawnChar();running++;setTimeout(()=>running--,7000);}},INTERVAL);

/* 背景星 */
(function(){const colors=["c1","c2","c3"],COUNT=60;for(let i=0;i<COUNT;i++){const s=document.createElement("div");s.className="star "+colors[i%colors.length];s.style.top=Math.random()*100+"vh";s.style.left=Math.random()*100+"vw";const size=3+Math.random()*3;s.style.width=s.style.height=size+"px";s.style.animationDelay=Math.random()*4+"s";s.style.animationDuration=4+Math.random()*3+"s";document.body.appendChild(s);}})();

/* START 遷移 */
startBtn.addEventListener("click",()=>{attemptPlay();startBtn.style.pointerEvents="none";startBtn.style.opacity="0";setTimeout(()=>location.href="select.html",500);});
</script>
</body>
</html>
